{"ast":null,"code":"import _defineProperty from\"/home/nina/Desktop/Ironhack/germanadmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/nina/Desktop/Ironhack/germanadmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nina/Desktop/Ironhack/germanadmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/nina/Desktop/Ironhack/germanadmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nina/Desktop/Ironhack/germanadmin/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link,Redirect}from'react-router-dom';import ThreadList from'./ThreadList';import{Button}from'react-bootstrap';import EditThread from'./EditThread';import Navbar from'../Navbar';import{bridge}from'../../utils/imageUpload';var ThreadDetails=/*#__PURE__*/function(_Component){_inherits(ThreadDetails,_Component);var _super=_createSuper(ThreadDetails);function ThreadDetails(){var _this;_classCallCheck(this,ThreadDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={thread:[],editForm:false,error:null,title:'',description:''};_this.componentDidMount=function(){axios.get(\"/api/threads/\"+_this.props.match.params.id).then(function(threadObject){// console.log(threadObject)\n_this.setState({thread:threadObject.data});});};_this.deleteThread=function(){var id=_this.props.match.params.id;axios.delete(\"/api/threads/\".concat(id)).then(function(){_this.props.history.push(\"/threads\");});};_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(event){event.preventDefault();var id=_this.props.match.params.id;axios.put(\"/api/threads/\".concat(id),{title:_this.state.title,description:_this.state.description}).then(function(response){_this.setState({thread:response.data,title:response.data.title,description:response.data.description,editForm:false});_this.props.history.push(\"/threads/\");}).catch(function(err){console.log(err);});};_this.toggleEditForm=function(){_this.setState({editForm:!_this.state.editForm});};_this.getData=function(){var id=_this.props.match.params.id;axios.get(\"/api/threads/\".concat(id)).then(function(response){console.log(response.data);_this.setState({thread:response.data,title:response.data.title,description:response.data.description});}).catch(function(err){console.log(err.response);// handle err.response depending on err.response.status\nif(err.response.status===404){_this.setState({error:\"Not found\"});}});};_this.componentDidMount=function(){_this.getData();};return _this;}_createClass(ThreadDetails,[{key:\"render\",value:function render(){if(this.state.thread){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"thread-details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"thread-details-text\"},/*#__PURE__*/React.createElement(\"h3\",null,this.state.thread.title),/*#__PURE__*/React.createElement(\"p\",null,this.state.thread.description),/*#__PURE__*/React.createElement(\"div\",{className:\"thread-details-buttons\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"thread-details-edit-delete-buttons\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.toggleEditForm},\"Edit Thread\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.deleteThread},\"Delete Thread\")),this.state.editForm&&/*#__PURE__*/React.createElement(EditThread,Object.assign({},this.state,{handleChange:this.handleChange,handleSubmit:this.handleSubmit})))),/*#__PURE__*/React.createElement(\"div\",{className:\"bridge-icon\"},/*#__PURE__*/React.createElement(\"img\",{src:bridge})));}}}]);return ThreadDetails;}(Component);export default ThreadDetails;","map":{"version":3,"sources":["/home/nina/Desktop/Ironhack/germanadmin/client/src/components/threads/ThreadDetails.js"],"names":["React","Component","axios","Link","Redirect","ThreadList","Button","EditThread","Navbar","bridge","ThreadDetails","state","thread","editForm","error","title","description","componentDidMount","get","props","match","params","id","then","threadObject","setState","data","deleteThread","delete","history","push","handleChange","event","target","name","value","handleSubmit","preventDefault","put","response","catch","err","console","log","toggleEditForm","getData","status"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom';\nimport ThreadList from './ThreadList'\nimport { Button } from 'react-bootstrap'\nimport EditThread from './EditThread'\nimport Navbar from '../Navbar'\nimport {bridge} from '../../utils/imageUpload'\n\nclass ThreadDetails extends Component {\n\n  state = {\n    thread: [],\n    editForm: false,\n    error: null,\n    title: '',\n    description: ''\n  }\n\n  componentDidMount = () => {\n    axios.get(\"/api/threads/\" + this.props.match.params.id)\n      .then(threadObject => {\n        // console.log(threadObject)\n        this.setState({\n          thread: threadObject.data\n        })\n      })\n  }\n\n  deleteThread = () => {\n    const id = this.props.match.params.id;\n    axios.delete(`/api/threads/${id}`).then(() => {\n      this.props.history.push(\"/threads\");\n    });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n\n    this.setState({\n      [name]: value\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const id = this.props.match.params.id;\n    axios\n      .put(`/api/threads/${id}`, {\n        title: this.state.title,\n        description: this.state.description\n      })\n      .then(response => {\n        this.setState({\n          thread: response.data,\n          title: response.data.title,\n          description: response.data.description,\n          editForm: false\n        });\n        this.props.history.push(`/threads/`);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  toggleEditForm = () => {\n    this.setState({\n      editForm: !this.state.editForm\n    })\n  }\n\n  getData = () => {\n    const id = this.props.match.params.id;\n    axios\n      .get(`/api/threads/${id}`)\n      .then(response => {\n        console.log(response.data);\n        this.setState({\n          thread: response.data, \n          title: response.data.title,\n          description: response.data.description\n          \n        });\n      })\n      .catch(err => {\n        console.log(err.response);\n        // handle err.response depending on err.response.status\n        if (err.response.status === 404) {\n          this.setState({ error: \"Not found\" });\n        }\n      });\n  };\n\n  componentDidMount = () => {\n    this.getData();\n  };\n\n\n\n  render() {\n \n\n    if (this.state.thread) {\n      return   (\n      <>\n      <Navbar/> \n       <div className=\"thread-details\">\n\n        <div className=\"thread-details-text\">\n\n          <h3>{this.state.thread.title}</h3>\n          <p>{this.state.thread.description}</p>\n          \n          <div className=\"thread-details-buttons\">\n            \n            {/* <Link to={`/threads/${this.state.thread._id}`}><p>Contact me</p></Link> */}\n\n            </div>\n\n            <div className=\"thread-details-edit-delete-buttons\">\n                <button onClick={this.toggleEditForm}>Edit Thread</button>\n                <button onClick={this.deleteThread}>Delete Thread</button>\n                </div>\n                {this.state.editForm && (\n                  <EditThread {...this.state}\n                  handleChange={this.handleChange}\n                  handleSubmit={this.handleSubmit} />\n                )}\n        </div>\n\n      </div>\n        <div className=\"bridge-icon\">\n      <img src={bridge} />\n      </div>\n      </>\n      )\n    }\n  }\n}\n\nexport default ThreadDetails;"]},"metadata":{},"sourceType":"module"}